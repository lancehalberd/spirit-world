Test at http://localhost:81/alttp/public/

Bugs:
    - Safari: graphics have antialiasing on

    Won't Fix:
        - Spirit Barrier appears above door frames when moving East/West through doors.
            - This only applies with old tile sets, so probably isn't worth fixing.
        - Enemies hit in the spirit world make noise when taking damage
            - This isn't a bug, this provides useful feedback when the player hits enemies in the spirit world, such as with bushes
              or rolling stones.
            - This feels strange when an enemy is hit offscreen passively, like a squirrel running into thorn bushes.
                - Probably enemies shouldn't run into thorn bushes anyway.
        - Pot can render in front of you when standing on ledge above it.
            - Not sure if this is fixable as it seems to require a real z value to correct.
            - We should probably just avoid allowing objects to be next to vertical ledges to prevent this.

    Cannot reproduce:
        - PS5 controller some buttons don't work correctly.
            - Works fine when testing on mac plugged in, need to test other configurations.
        - Fix bug: possible to defeat frost beast without getting reward somehow
            - Jun did this by firing fire arrows from the bottom of the screen.
                - The door opened but he didn't get the reward, and the boss respawned on returning.
        - Robot stopped moving in ST basement. Maybe ice damage against shield is broken?
        - If controlled clones despawns during quick clone toss, sometimes you'll take control of the original clone in an invalid position, such as inside a solid object or cliff face.
            - Possibly fixed by other changes.

Graphics Work:
    Categories of types of graphics work:
        NPCs: still frames, walking animations, flourish animations, gestures, idle animations
        Enemies: idle, move, attack, damage, death animations
        Bosses
        Tilesets
        Objects: Doors, decorations, interactive puzzles elements
        Effects: enemy attacks, projectiles, environmental effect
        HUD elements: item icons, panels, frames
        Cutscenes: design direction for cutscenes and bespoke elements for cutscenes
    Phases of graphics work:
        Concept design: details of the asset or even which assets are needed are still being decided.
        Concept art: conceptual art/sketches used to determine the final design.
        Working draft: create a draft at resolution with animations that can functionally be used in the game.
        Revision: improve an existing draft to match style/perspective/quality of the game better
        Extend: add additional frames/tiles to an existing draft to cover more behaviors

    Special:
        Concept art of Rival - is both an NPC + boss
        In Progress: Concept art of Jade Champion - is both an NPC and ally in boss fights
            - May be a playable character at some point

    Cutscenes:
        Concept design for the release of the elemental beasts and the attack on the Holy City
        Growth of the World Tree

    NPCs:
        Concept art of Vanara Elder
        Concept art of Vanara Guardian
        Concept art of Vanara Captain
        Concept art of Spirit Tree manifestation(s), how the Spirit Tree presents itself to the main character
        Concept art for denizens of the Holy City + Grand Temple
        Concept art + design for the Vanara researchers at the Fertility Temple
        Concept art + design for the rest of the Vanara Crew
        Concept art + design of native spirit gods+demons
            Spirit King or Queen
            War God
            Fertility God
            Fertility Temple Lead Researcher(Demon)
            Forge master
            Concepts for additional major gods and demons
        Concept design of native spirit beings
            Forge workers
            Fertility Temple Researchers
            War God Alcolytes (may double as an enemy)
        Concept design for additional NPCs

    Enemies:
        Revision of squirrel and elemental variants
        Low priority: Revision of Flame Vortex
        Concept art of Sentry Bot
        Concept art for humanoid praying mantis soldiers
        Concept designs for additional World Tree enemies
        Concept design for "amphibious" lava enemy that can move on land or swim in lava.
        Concept designs for additional aquatic enemies for Lake Temple and underwater areas.
        Concept designs for additional Forge enemies
        Concept designs for additional Material world enemies
        Concept designs for additional Spirit world enemies
        Concept designs for additional Hybrid enemies

    Bosses:
        Revision of Flame Beast
        Concept art for Phoenix Boss in the Holy Sanctum
        Concept art or Working draft of Frost Beast
        Concept art for Third Rival fight: large astral projection that fights alongside the final elemental beast
        Concept art Fourth Rival fight with elemental variations based on the final elemental beast defeated
        Concept design for final boss(es)
        Concept design of Crater Miniboss - currently a heat absorbing spirit that can freeze the player
            Maybe an amalgamation of smaller spirits that join togeter in a single large colony.
            The player has to do something to break it up into its constituent parts and defeat them before they join together again.
            Should be vulnerable to Ice.
        Concept design for Sky Palace Boss
        Concept design for Forge Boss possibly some kind of robot/golem/simulacrum
        Concept design for Fertility Temple Boss

    Tilesets:
        Concept art of World Tree(Modified fully grown Spirit Tree)
            This would be used both for drawing the exterior in the lab and overworld and for exterior sections of the final dungeon itself.
        Concept art of Modified Vanara interior tiles for the World Tree
        Concept art of Research Lab tileset for the Fertility Temple and Underground Lab dungeons
        Concept art of Vanara dreamworld tileset

    Objects:
        Revision of Vanara stasis pods
        Revision of floating ice spikes
        In Progress: Concept art of Daughter Tree (miniature Spirit Tree)
            Peach cave version with shriveling animation as it grows the Peach of Immortality.
        Concept art of Helix exterior(partially grown Spirit Tree) in the Spirit World lake
        Concept art of Helix exterior pinnacle in the sky
        Concept art for the structure around the main Spirit Portal (material+spirit world variants)
        Concept art for original Jade Champion Statue in the Holy City

    Effects:
        Dirt particles for breaking cracked dirt tiles.
        Revision of frost grenades

    HUD:
        Magic Beans icon
        Icons for consumabls:
            Peach Potion
            Spirit Tonic
            Spirit Elixer
        Jade Champion items:
            Elemental/Magic boots (apply equipped element to the ground while walking)
            Flippers (allow diving and staying submerged by holding the passive tool button) (can be used as long as iron boots are not equipped)



Graphics to Implement:
    Add PS controller icons, detect xbox vs ps controller
        - check gamepad id, navigator.getGamepads()[0].id to see if it contains string '45e' (vendor id for microsoft/xbox) ormu 'xInput' or 'xBox' (xbox/microsoft) or '54c' (vendor id for PS/sony); issue with Safari: wireless PS4 controller called 'Wireless Controller Extended Gamepad'
    Add slam effects for the staff.
    Sweat animation when pulling on something you cannot move.
    Add Item Get Frame gfx/wukongimportantitem.png 20x28
    Add sparkles to peach loot + hud.
    Add damage effects for hitting enemies?
    Add damage effect for player hurt? (alttp doesn't have anything like this)


Current tasks:
    - Add new graphics
        - Moss tiles
            - Should swap colors between worlds.
        - fireball effect
        - dirt particles

    - Add Vanara Dreamland
        - Add initial cutscene for meeting the Spirit Tree
            - Learn Teleportation after talking to the Spirit Tree
                - In order to teleport MC must learn to manifest their physical body in the Dream World.
        - Add Vanara Dreamland to logic
            - Move check from Vanara Guardian to the Spirit tree
            - Add logic for all teleporters
        - Update entrance to Vanara Dreamland from the cocoon to use a sleeping pod you can interact with.
        - Add Spirit world entrances: Fertility Temple, Helix Bridge, Sky City Arcade, Jade City Arcade
        - Design + Create the Vanara Dreamland
            - NPC Vanara projections populate the dreamland
            - For now use regular grass tiles + vanara plants and then see if using clouds for exterior boundaries gives it a more fantastic feel.
            - Eventually we will want more Vanara ship/plant tiles here and the Village and for the Helix exterior.
            - The dreamland will start small and expand as you save the Daughter Trees.
                - Add indicators for where the dreamland can expand.
                - In the Fertility Temple Vanara researchers have created a treatment to protect the Daughter Trees from the beetles cutting them off from the Spirit Tree.
                - One of the crew on the Helix recommends visiting the temple to assist them.
        - Add NPCs to Vanara Dreamland
            - Design NPC dialog
        - Add Teleportation tutorial to Vanara Dreamland
        - Design+comission avatar for the Spirit Tree
            - Fully grown Helix exterior in a prominent location of the Dream World
            - Approaching the tree will cause the avatar of the Spirit Tree to appear which looks like some kind of heavenly being?
                - Work with artist on design details.
        - Add boss rush to Vanara Dreamland

    - Add charge behavior to drone
        - line up with hero within 100px
        - Charge up for 500ms, accelerating frame rate to 4x by 300ms, strafe to align with hero quickly at first, but slow to 0 speed by 300ms
        - Drop shield and rush forward for 1s.

    - Peach collection quest
        - NPC in waterfall village storage room:
            "You look like you need some work to keep you out of trouble."
            "Take this basket to collect peaches. If you bring me 20 peaches I'll give you a treat! {item:peachBasket}"
            (hint before completion) "Make sure you aren't hurt when you collect peaches, otherwise you won't be able resist eating them yourself."
            "Wow look at all these delicious peaches. Wait one moment."
            "Here this is for you {item:peachPotion}"
            (hint before completion) "You can bring me 20 more peaches if you want some spending money."
            "{choice:Give 20 peaches?|Yes:peachCollector.jadeReward|No:peachCollector.no}"

    - Proposal
        - Require teleportation for fully entering the Spirit World.
        - Astral projection allows entering the Spirit World as projection only.
        - Losing all Spirit Energy returns you to the last location you were in the Material World.
        - This would require modifying Spirit World sections in Cocoon to only require Astral Projection.

    - Add new helix exterior graphics
        - Add helix exterior to material sky
            - Match door support to Staff Tower door
            - Add proper hit detection.

    - Add Monk1 and Monk2 NPC graphics

    - Add Drone enemy graphics.

    - Switch Spirit World shops to use aether.
        - You can sell certain rare artifacts for aether in the Spirit City.
            - Aether crystals can be sold to AR collectors for aether and to unlock new AR content.
            - Add bag to inventory to view additional collectables like crystals and aether.
        - Aether can be used to unlock additional AR games and content.

    - Add more AR games, global progress and rewards
        - Milestones/achievements grant global AR progress that can unlock more difficult AR content and some small real perks (Peach Piece at most)
        - Add AR arcade to both the Spirit City + Sky City.
            - Can play any games at the arcade, but each one has different games that can be unlocked, as well as different prizes.
            - Portable AR headset is an early prize in sky city

    - Forest/overworld puzzle
        - Use astral projection from the spirit world to push a water droplet to grow a vine in the material world.

    - Add 2x2 map tile frame to tile behaviors that is used when drawing the map
        - Instead of drawing areas at full scale and then scaling them down for the map, just draw them directly at the final scale.

    - Consider modify rolling balls/pots velocity to match the direction it actually starts moving when hit.
        - If it is hit DR but only moves R the velocity should be R.

    - Add support for placing objects/NPCs inside of beds, stasis pods, and tubes.

    - Apply Cocoon tiles in Cocoon.

    - Add test to remove empty tiles masks applied to empty layers.
        - Delete masks when setting tile to 0/1 to prevent this.

    - Add exit cutscene for Jade Champion during Storm Beast.

    - Add new city tiles.
        - Fix dome object hit boxes.
        - Create window objects.

    - AR Dodger improvements
        - Add special levels
            - Endless mode with difficulty increasing by 1 every 10 seconds.

    - Consider updating eye color when True Sight is unlocked, or drawing a third eye when using Spirit Sight.

    - Add function for generating a full size image of an area or area section.

    - Add different SFX for charged bow, maybe even per element.

    - Jade Champion during Flame Beast
        - JC warns: 'Focus on the heart, I'll distract the beast!'
        - The beast can target the Jade Champion when choosing where to target.
        - JC will teleport near the beast outside of the lava to attack it when the beast goes to 'emergeWarning'.
    - Test JC in Flame Beast fight:
        - After starting the fight and reloading.
        - After dying and restarting at last save.
        - Randomizer mode.

    - Jade Champion during Storm Beast
        - Put up a barrier when the heart is enraged and add text cue telling player to come to the barrier.
            "I'll shield us from it's fury!"
        - if the heart is up "I'll deal with the beast, focus on the heart!"
        - Brainstorm additional behavior improvements.

    - Cut a new version
        - Test on staging
        - Ask if anyone else wants to test staging.
        - Release to production.

    - Make floating/flying enemies fall into pits/water when frozen.

    - Hide hud for longer cut scenes
        - End of rival fight, start of rival 2 fight.

    - Add NPC options to bed decorations
        - Maybe add the NPC separate from the bed, but have the bed target them which turns the NPC into
          a display child of the bed and renders them below the sheets.

    - Bug: Astral projection can pull linked pots on top of the hero.

    - Brainstorm additional dialogue for characters:
        - After the beasts escape/after the beasts are defeated.
        - Holy City
        - Grand Temple
        - Waterfall Village
        - Forest Village
        - Jade City
        - Helix

    - Exit from peach cave water doesn't render frozen correctly.

    - Investigate: Masked tiles are not inherited in the spirit world.

    - Draw wadingAnimation instead of enemy shadows for enemies near the ground over water.

    - BLocked: Freezing should apply under masking tiles unless the unmasked behavior can be frozen as well.
        - It is unclear what to do in the case when the unmasked behavior can be frozen by enemy attacks but not by hero attacks.

    - Fix you can wrap around the edges of the sky using cloud sommersault from the tower platform.

    - colored lights from the current world should render under spirit sight, not over
        - Check what colored lights look like in the other world too.

    - Replace lightningDischarge with blast.

    - Add color to lights
        - flame wall should be red
        - lightningDischarge should be yellow

    - Preload music.

    - Design and add enemy scaling
        - Add variant seed to enemy instance props in editor (default to 0)
        - Add global enemy variant seed as configurable GET parameter
        - Add optional enemy variant seed to enemy definition.
        - Choose an enemy to support creating arbitrary power variants of using global->enemy definition->enemy instance variant composite seed.
        - Give each enemy a base power rating, possibly a product of offense * defense.
            - offense is a combination of inherent ability power, additional ability power and movement speed
            - ability power increases with damage/coverage(space+time) and reduces with cooldown and tell durations.
            - defense is a combination of health, movement speed and defensive abilities (barriers, immunities, evasion).
        - Enemy power can be scaled by arbitrary amounts.
            - 2x scaling means an enemy with power 3 would become power 6.
            - Scaled enemies deterministically become stronger by scaling individual attributes to match the new power level.
            - The seed for scaling can be changed to randomize how enemy scaling works.
            - Scaling enemies is done on a per enemy basis so adding new enemies won't change the outcome for existing enemies.
        - Ability scaling
            - Projectile attacks
                - Change targeting, number, spread type, range, speed, add oscillation, decay, detonation.
    - Support enemy randomization
        - Tag all enemy abilities and types for compatibility, such as "ice", "stationary", "flying"
        - Using the base power for existing enemy types, remove all optional abilities from enemies, then randomly add matching abilities
          to the enemies based on tags until the enemy matches the desired power level using the new enemies.
        - Try to balance how many instances of each ability are used so there is still nice variety.
        - Add additional abilities/configurations to increase variet.

    - Flame Beast improvements
        - Add damage frames for the beast.
        - Prevent beast from attacking "up" ledges when spawning in the center.
            - Probably prevent the beast from considering actors "near" spawn points if there is a ledge in between.
        - Fully emerges from a lava pool with line of site on the player and charge to the player and into another lava pool.
            - Need animation for entering lava pools head first.
    - Frost Beast improvements
        - Spawn medium heads that can appear anywhere on the battlefield
        - Make Frost Beast more dangerous underwater and when enraged.

    - Add trap chests to the game, like the fire turret chest?

    - Make lava floors effect objects+enemies
        - Should unfreeze frozen objects
        - Make lucky beetle despawn if it takes lava damage

    - Allow shooting through enemy flames to add flame to your attack
        - This will make fire enemies immune to bow/chakram attackss that pass through their flames.
            - Maybe change how immunities work for bow/chakram so they hit with the element first and then just physical damage.

    - Replace closed door after Peach Cave boss with impassable plants that disappear when the tree dies.
        - Let's make new graphics for this as a pilot of the Cocoon graphics.

    - Add sound effect using pink noise when near a waterfall.
        - Use pink noise for barrier burst SFX.
        - Support spatial sounds so the waterfall changes speakers and gets fainter when you are far from them.

    - Replace low stones underwater with walls or taller obstacles.

    - Make lucky beetle teleport away instead of showing the death animation.
        - Make sure this still sets the flag for preventing it from respawning.

    - Check if fixing the hitbox on transition for beadflows removed the need for disabling input on transition.

    - Fix angled southern ceiling walls have awkard bumps in cavern graphics.

    - Fix clone movement is broken when controlling multiple clones while grabbing something.

    - Hitting moving pots should not completely overwrite existing pot movement.

    - Remove old graphics
        - Replace remaining old cave graphics.
            - Underwater - Use cave tileset.
            - River Temple Boss+Underwater - use stone tileset
        - Replace old cave tiles with deleted tiles.
        - Remove all references to the cave tiles, but keep the image itself.
        - Replace remaining cave doors and remove graphics + door style.
            - Set cavern as default door style.

    - Add tutorial sections for clone
        - Swapping between clones
        - Clone Explosion
        - Controller multiple clones
        - Clone throw

    - Probably shouldn't be able to bounce onto trampoline after crossing up a ledge.
        - On the other hand this isn't a very obvious problem and is kind of fun for people that find it.

    - Add a better indication for which clone(s)+staff(s) are controlled.

    - Add coil graphics for lightning barriers. 3x styles.

    - Prevent weapon knockback from triggering area transition.
        - Update movement behavior to treat door entrances+exterior edges of the screen as walls when knocked back.
        - If nothing else, at least move stationary plant enemies far enough from transition edges to not trigger this by the forest.

    - Possible work items:
        - Add final dungeon
            - Would prefer to have Vanara Ship tiles
        - Add sky city
            - Would prefer to have smooth crystal exterior tiles
        - Work on larger world map
            - Would like to brainstorm more ideas of what to include.

    - New enemy: lava monster with shell (TBD by artist)
        - possible designs:
            - Boulder with an enterior like a clam/urchin
            - Mollusk
        - When spawned in lava moves around as bubbles, can be trapped by freezing lava over it.
            - Will eventually use an AoE fire attack to unfreeze the lava when trapped.
            - On cool down, jumps out of the water with splash effect and shoots (tracking?) fireball(s) at the player
            - Freezing it when jumping has the same effect as freezing it while on land.
            - Attacks will melt frozen lava
        - When spawned on land it paces slowly and approaches player within a fairly large radius.
        - When close enough it uses firebreath attack with slow turn speed and long cooldown.
        - Only vulnerable to staff+cold damage when the shell is up.
        - Shell takes 2 hits to destroy, either from staff or being frozen and then hit with a physical attack.
            - Freezing and hitting with staff will instantly defeat the enemy.
        - Vulnerable to everything but fire when the shell is broken, moves faster and has more dangerous attack behavior.
        - Can move into lava. Returning to lava will regenerate the shell if missing.

    - Mechanic for breaking crystal barriers open is unintuitive.
    - Add 4th spirit upgrade that let's you swap between worlds while meditating.

    - cannot roll/astral project around a diamond shaped set of cliffs smoothly.
        - low priority, but this can probably be fixed by adjusting which anchor point is used when calculating
          `isAbove` in canMoveX when adjacent to various diagonal ledges.

    - Brainstorm more clone tool puzzles.
        - Maybe in the back of Forest Temple scientists give you the clone tool and then agree to answer questions if you complete "tests" for them.

    - Brainstorm more invisibility puzzles.

    - Add crushed status effect
        - Applied from certain attacks like golem hand slams, guardians running over the hero, etc.
        - Render the hero laying down for Nms.
        - Button press shakes the player sprite and reduces duration by 200ms once every 200ms.
        - Gold armor should reduce or prevent the effect of crushed.
        - Iron skin prevents the effect but at the cost of losing all stacks of iron skin.

    - Render player mostly submerged in deepwater with iron boots on (draw the top 4px of the sprite over the shallow water animation)
        - Allow the player to move under solid objects this way
        - If they remove iron boots under a solid object, they should stay submerged until they aren't on a solid tile.
        - Could add a special tile for underwater passage that let's them go under any tiles in this fashion provided they are submerged.
        - Player shouldn't take damage while submerged.
        - Non-deep water/water passage tiles are treated as solid for the player while submerged.
        - Player should lose spirit underwater just as when otherwise submerged

    - On area creation run ambient effect creation 50-100 times with animation timers+ position advanced by 20ms-2000ms to simulate pre existing effects.

    - Come up with a method for generating enemy patterns in generated areas.
        - Want to be able to have a consitent theme for an area
            - So of multiple possible enemy combinations, one is chosen for a zone and then each section chooses enemies from this combination.
    - Add additional blockedPath styles.
        - Maybe cracked pots requiring clone tool

    - pushable cathode/anode we can use for puzzles where you have to divert electricity to remove a barrier or activate a lightning switch.
        - Need to make sure the lightning barrier can hit objects like switches for this to work.
        - Could have an anode object that sends lightning at all nearby cathodes briefly when hit by lightning.

    - Add a variant cave with new paths to the mountains + spirit world.
        - 3 possible entrances determined by variant seed:
            - Overworld near Mountain Tower
            - West most area of Waterfall Village
            - Inside of Bush Cave
        - Contains a spirit world portal behind Clone Tool (cracked wall) or staff (rocks surrounded by pits)
        - Contains a 50 Jade check with no logic requirements
        - Peach Piece behind either medium range switch or cloak switches
        - One time difficult enemy encounter on the path to the exit/spirit world:
            - Golem hand + 2 charging beetles
            - Ent + 2 arrow turrets
            - Triple elements + Plants
        - Exit blocked by Cloud Boots/Ice(U-turn cracked ground) or Astral Projection (pot switches in both worlds)
            - Exits to ledge above entrance to cave ascent, which will now have a Silver Ore on it.


    - Remove Howler.js and use WebAudioContext directly.
        This article on sound implementation in Cross Code might be useful:
            https://www.radicalfishgames.com/?p=973

    - Populate Spirit Ruins
        - Link entrances to the spirit world
        - Add placeholder NPCs and dialogue
            - Use 2x scale elements for NPCs
        - Add NPC with a check to the East building
        - Add a visible check somewhere outside that can be peaked early with spirit sight

    - Add consumable items
        - Peach Potion - Restores 5 hearts
        - Spirit Tonic - Restores all Spirit Energy (and resets cooldown)
        - Spirit Elixer - Restores all Spirit Energy and grants unlimited Spirit Energy for 5s

    - Allow copying and pasting variants
    - Allow resizing variants by clicking and dragging near the edges.
        - Should probably change the arrow cursor for this.

    - Bad looking tiles when turning off middle beads stream in waterfall tower.
        - The bead cover covers up the beads on the ground. In some sense it should be rendered on a particular tile layer.
        - We can fix this by setting a layer id on the bead cover for the layer it is covering (floor2), then when it is not fully open,
        render all background layers above that layer on top of it as part of the object. This would allow us to draw certain objects
        "beneath" tiles in general at the expense of some extra renders.

    - Add new draw priority to an object
        - Unclear if this will be useful for anything yet.
        - overTileLayer/underTileLayer(+layerKey): Draws the object to the background or foreground canvas immediately before or after
          the layer specified by layerKey.
          - Since these layers are not updated, the object will only be redrawn when the associated canvas is redrawn.

    - Moving platform gets stuck in a weird position sometimes in the forge.
        - When transitioning, reset the moving platforms if they are not in the same area as the player.

    - Staff should block ground spike attacks.
        - Keep the ground animation, but prevent it from increasing ground height and stop the actual spike from appearing.

    - Clones disappear when draining lava/etc.
        - Grown thorns disappear when draining lava.
    - Tower staff animation freezes when used to hit switches for draining lava.
    - Change mother speech bubble in randomizer when you can finish and when you have full cleared the game?
    - Elemental immunities are confusing, they just pass through enemies.
        - For arrows specifically, maybe they can still deal normal damage.
    - Fire/Ice arrows bounce of void hands when they are up in the air.
    - Should we prevent throwing rocks up ledges?

    Swimming bugs:
        - Chakram/bow fire when armed and you unequip iron boots
            - Instead let's just disarm them.
        - Chakram returns to below you if you attack and then unequip iron boots
            - Let's have chakram move towards the hero's z value when returning and not disappear until it is within N px vertically.
            - Make sure chakram respects z index when rendering.

    - Add graphical interface for choosing Nimbus Cloud location using map.
        - How to signify cancel operation?

    - Make sure destroying connected tiles is consistent: cutting/smashing does not effect the other world, pushing/throwing should

    - Remove logic for projectiles hitting ledges from field::hitTargets and remove projectiles hitting ledges using
      either movement logic or ledgeDelta logic.

    - Low priority Staff Tower changes
        - east/west doors
        - Add elevator behaviors
            - off, terminals are not animated/functional

    - Fix push/pull interactions with ledges.
        - Minor issues:
            - Moving sideways can be blocked in a passage that is exactly 32px wide even though ideally everything would wiggle into place.
                - This is pretty uncommon but can still happen even with code to move the player towards objects on grab.
                - The issue is that if the player's subpixel doesn't match the pot, when the pot can no longer move forward, the player is stuck at
                  the subpixel distance. The attempt to wiggle, but the pot has no wiggle room(it is flush with the wall), so the player's movement is aborted.

    - Fix audio restarts when going under water during the frost beast fight.

    - All audio should pause when the game stops updating.
        - When in a background tab.
        - When showing the game controls.

    - peach cave narrative
        - Add a message to the chakram chest if you check it after opening it.
        - Add dialogue after defeating the beetle boss
            *A voice echoes through the cave*
            {|}Thank you for saving me.
            [-]

    - Minor issue with ledges
        - Should be able to grab ledges when below them just like you can grab solid tiles.

    - Save statues missing dialog:
        - jade city
        - spirit forest
        - gauntlet
        - war palace
        - lab
        - spirit sky
        - holy sanctum
        - sky palace
        - forge

    - Helix Rival improvements
        - Add level 2 ice attack that he uses only after being frozen once:
            - "Think you can reflect this?"
            - Shoots an ice spike object at the player which comes to rest near the edge of the battlefield
            - After this ice attace, move to center then shoots 3 large fire balls one after another at the player that knock the rival back on cast.
                - If the player positions themselves correctly they can knock the rival back into the ice spike and stagger/freeze the rival.
                - Either way the ice spike disappears after the fire ball attack to prevent accumulation.

    - Get drain graphics for forge?

    - Allow sneaking into grand temple with invisibility
        - Replace door with open arch guarded by a warrior monk
        - Ultimately this should be a narration box that causes the guard to say Vanara cannot enter the temple.
        - Make sure rolling doesn't let you pass

    - Add a task for a generic enemy transformation animation I can use for upgrading enemies to elemental versions.
        - Having them instantly change looks buggy in some cases, and for the flies it is hard to tell when it even happened.

    - Fade out any text cues during screen transitions. Right now it just abruptly disappears.

    - Overworld project
        - Add lake
            - Should have two waterfalls/rivers entering from the northwest+northeast on opposite sides of a divide
            - The lake temple should be near the northwest on what would have been the banks of the river going to the summoner ruins before the crater was created
                - The lake temple should be near the edge of the crater so that it is plausible that it wasn't completely destroyed when the crater was made.
                - The direction of the creater is west southwest with most of the rim of the crater built up on the south and west.
                    - The northern rim is mostly the natural elevation of the mountains it ran into
                    - The lake drains to the east towards the holy city on what was previously a fairly small water shed, but is now much larger due to diverting water from the west water shed.
            - Add cliffs around parts of the lake.
                - Maybe we can reduce the exits out of the lake to make pathing more interesting and to help push the player towards the waterfall initially.
            - I would like to add cliffs underwater, but we can't used this with the swimming mechanic because they don't have a real z component.

    - Extract air stream effect so it can be used as an enemy ability
        - Add a warmup time that can be used as a tell (ramps up from 0-100% effect over N ms).
        - Give the Storm Beast an attack where they try to blow you off the platform.

    - Add chunk objects to editor
        - Choose w/h, style, then any additional properties from the style parameters.
        - Have an excavatedBuilding style we can use in summoner ruins
            - parameters doorId and spiritDoorId for optional entrance that can be added to it.
            - Using ids of existing doors will allow us to freely configure the doors.
        - This is a bit tricky to implement because we want the chunk to modify tiles/object properties (like doors) but
            we don't want it to change the definition, otherwise changes from the chunk will get saved in the base map
            but we want those applied on load.
            Because of this, we probably just want the chunk to apply to the area instance after it is created but this means
            that to display the correct state, chunks will have to constantly be reapplied during editing.
            Perhaps this can work like minimap generation where chunks autorefresh by default, but

    - Allow editing tiles in adjacent areas.

    - Fix: Do not allow dying due to burn when boss is defeated
        - Set hero life to at least 1 and remove any burns on boss completion.

    - Forest temple dialogue:

        Head Native Scientist:
        - Greetings 817H, we have been looking forward to testing you.
        - You have questions, yes? Complete these simple tests and we may have answers.
        - More tests means more answers, yes? But don't worry if you can't complete them all.
        - You can always come back later to try again.
        - This was the only test 817V failed to complete.

        Native Scientists:
        - We have to monitor the nutrition of the Vanara very closely.
            - Vanara with too much or too little nurishment have to be returned to stasis.
            - ...{|}Maybe you should talk withe one of the Vanara scientists instead.
        - Vanara upset the balance of the Spirit World. Humans and Vanara are both unpredictable, but Vanara can touch the Spirit World with too much ease.

        Vanaran Scientists:
        - Our Vanaran ecosystem is invasive. {|} Without proper management it will overrun these lands.
            - Vanaran life has evolved to take root in alien worlds and make life habitable for us,{|} but we are supposed to avoid living worlds.
            - We were supposed to leave when we detected life here, but there was an accident and our ship crashed.

    - Add automatic door cue messages when possible:
        - Use expicit floor cues if defined.
        - Only do if a Map Label is defined.
        - Show a map cue any time the floor changes when entering a new area section.

    Charging Beetle Hybrids
        Storm - Instead of a normal charge, show a red ray warning and then do a lightning warp up to 96px that hurts everything in between.
        Flame - Leave flames behind while charging and create a fire blast on impact with radius 48 and no tell.
        Frost - Freeze ground while charging (can charge across water). Ice blast on death.

    - Add puzzle to forest temple where you need to move element from one enemy to another to solve.
        - Defeate Ice snake to let ice element possess plant, then have the plant freeze cracked ground or a pot.

    - Brainstorm ideas for Forest Temple
        - Include as much generated content as possible
            - Generated content should use a new worldSeed that is readable from url parameters
                - worldSeed should be 0 by default
                - For randomizer, worldSeed should default to randomizer seed
        - NPCs should be Vanara Crew Biologists and Native Spirit Scientists
            - Might have to think about how specifically Vanara share information+techniques with native Spirit Gods to avoid giving them too much power/information.
            - Probably an underlying tension where as factions they are strategically trying to gain more information, but at the same time many individuals
                just want to learn more and solve important problems.
            - There is a faction of military scientists that previously served the War God that other native scientists distrust more than the Vanara.
                - The boss could be a side project of these scientists that the Vanara have allowed them to create specifically for training Vanara in combat.
        - Area should contain artificial biomes for hosting a variety of creatures both native material/native spirit and vanara as well as new hybrids.
            - Will need to support hybrid monsters of various sorts
                - exist fully in both worlds
                - have different parts in each world
                - phase in and out between worlds
                - symbiotic pairs between spirit beings and material beings
                    - flame spirit pairs with a snake to give it fire powers and allow it to survive in colder environments
                - Set of native elemental spirits for each element, lightning/fire/ice
                    - Could have more powerful spirits make more powerful hybrids.
                    - This also sets a good precedence for spirits bonding with the MC after defeating the elemental beasts.
                    - Summoning the elemental beasts would require sacrificing animals for them to bond with.
                        - The elemental beasts power is so destructive that the animals' bodies are destroyed over the course of the summoning.
                        - The phoenix was created by progenitors but was too powerful being able to restore its physical body with energy from the spirit world.
                        - The elemental beasts with their Vanara hearts represents a similar threat as the phoenix, except the hearts function as a weakness.
                        - Level 2 charged attacks could damage the player as they are channeling too much energy from the spirit realm for their body to handle.
                            - The phoenix crown would eliminate this damage by using the crown to channel energy more effectively.
            - Water Biome, Fire Biome, Desert Biome, Cave Biome, Forest Biome, Grass Biome, Cold Biome, Marshe Biome
            - New enemies added here can be used to populate other areas of the game.
                For example the water temple and the crater need new enemies that could be shared here.
            - It would also be cool to have a history of successful hybrids with some having been out in nature for generations, and others recently released and
                others currently in testing, others still in development or planning.
            - The enemies the hero encounters are intentionally accessible and being tests for hostility and survivability.
                - MC has been expected here for some time, perhaps even before the start of the game.

    - Break up Spirit Sky to make it act like a hub for exploring the spirit world.
        - Add magic beans that can grow vines to the sky
            - Above lake to top of helix/sky palace courtyard
            - Above holy city to ???/sky city
            - Above forest to two-way teleporter above forest
        - Plant beans by having a bean and interacting with a planter (plant a bean here?)
        - Beans cost 20/50/100/200 Jade
            - Beans sold in Sky City so cannot be source of sky access
        - Need some kind of one way locks that can be opened in spirit sky after opening a new entrance
            - Activatable bridges (cloud sommersault would allow full traversal of sky, which is probably fine)
            - Could make it so that entering sky palace requires gaining access to multiple sky areas first

    - generate bow chest switch puzzle
        - switches are E/W/N/S from a single point in the area at least 4 tiles out from the point.
        - increase difficulty with
            - 2 - 4 switches
            - prefer adding any additional locks below for required items since that will make the puzzle more unique based on context.
                - This should be a general design principal for generating puzzles.
            - add pots in front of switches
                - add rocks/walls to the sides of pots
            - add pits around switches+pots to prevent manually pushing/pulling the pots.
            - offset row/cols of switches
            - switches are not all on screen at once.
        - additional locks:
            - any element by setting switch element
            - spirit sight by adding decoy switches and requiring sight to identify the correct switch
                - Only effective with 2+ switches
            - gloves by locking the pot with stones
            - staff by putting pits around the shooting area
                - need to be careful about only offsetting switches in one direction if this is used.

    - generate bow door switch puzzle
        - increase difficulty with
            - 1 - 4 switches on 4/3/2/1s timers

    - Chest styles
        - Trash (Jade)
        - Dungeon Item (Key/Map/Big Key)
        - Collectible (Silver/Gold Ore/Peach/Peach Piece)
        - Prize (Chakram/Tool/Victory Point)

    - Allow looking underwater with R2 when you do not have iron boots.
        - Use same effect as spirit sight

    - Forest temple boss should provide a golden peach in addition to the clone tool.

    - Hot room status is incorrect in alternate world, it is always matching the current world.
        - Fixing this will prevent ice tiles from forming incorrectly in hot rooms in the alternate world.
        - It will also allow us to make hot rooms consistently burn enemies.

    - Add respawn flag to objects that causes them to respawn if destroyed.

    - Use grey cloud tiles for clouds covering storm heart.

    - Make it easier to find the gloves
        - Add a quest state that highlights the entrance with the gloves.
        - Move the map to the main chamber as a new check with a simple puzzle to obtain it

    - Aimed Projectiles for Cocoon boss an other
        - EnemyProjectile wrapper for CrystalSpike/Flame/Frost/Spark that takes an element to determine which projectile to use
            - Or it takes a projectile Effect, but there is a utility method to generate to the projectile effect from element.
        - Projectile appears stationary in the air during delay frames (this can be set as a boolean)
        - Projectile can be assigned a target, if so
            - Projectile vx/vy update to point at target as long as it is visible
            - Possibly can set an additional delay where vx/vy stop targeting before projectiles launch
        - Cocoon boss summons a ring of aimed projectiles around them with 400ms increasing delay on each one

    - Brainstorm how the beasts get released
        - Maybe destroying the idols causes them to wake up and flee the War Temple
        - War God convinces Rival to summon the beasts to the material world to distract the Spirit Gods from his plan
        - While they are "missing" they are actually being given their Vanaran Hearts

    - Forge
        - Gold mail offered by NPC if you bring gold ore and 500 money

    - Randomizer hint sometimes says you are in BK mode with checks in logic
        - I think this happens when your last check is behind a locked door that you have enough keys for but the randomizer thinks you don't because it isn't counting locked doors you have already opened.
        - We can fix this by tracking totalSmallKeys independent of current small keys and have the logic be based on the total.

    - Add vertical tiles in between sky and ground:
        - Could give a greater feeling of vertical depth to the world
        - south facing cliff face near the mountains
        - waterfall near the waterfall
        - outside of staff tower when it is setup in the tile
        - empty sky/abyss tiles when falling through random sky tiles.

    - Flame wall improvement
        - Refactor as individual flames so that each flame can hit individually or be destroyed by ice.


    - Support multiple active missions
        - On map, highlight the first mission and display a location name
        - If the user confirms, show them the help text for the mission.

    - Idea to fix small hit immunity from preventing larger damage:
        - When setting iframes, record the damage that caused it.
        - When something takes a hit and has iframes, if the damage is greater than the previous iframe hit,
            take damage equal to the difference, extend iframes, and record the greater damage amount.

    - Upgrade entrance randomizer to support complex connected exit graphs.
        - Currently it only supports connected exits that can be traveled in all directions.

    - Improve projectile interactions
        - Set stopX/Y when stopping a projectile which will prevent them from appearing to into cliffs/walls that they hit.
            - if stopX > hitbox.x and direction is left, adjust x by the difference, similarly for other directions.

    - Add underwater mechanics
        - allow swimming over low/medium barriers (set floorHeight to 16px on these)
        - Swarms of fish that are composed of fish shaped particles that chase the player
            - Hitting them destroys a couple of particles and slows the fish down but does not destroy them
        - large turtle monster
            - spawns up to 2-3 small swimming turtles that chase and attack you with 3-4 hp a piece
            - does a 2s spinning aoe bubble attack (like void frost) on 6s cooldown
        - simple medium fish monster that just wander around like snakes.
        - medium sword fish that moves back and forth and speeds up if you are lined up with it

    - Add additional uses for true sight
        - Rolling ball puzzles that can be solved by moving an invisible pot
        - Invisible cracked doorway to a new cave in spirit world.
            - To prevent memorizing this in randomizer, we could randomly place the door in four different places that are inconvient to check
                - For example, they might require you to jump down a cliff to check if the door is there.

    - Add meteor attacks that leave behind rocks to void tree fight
        - Give to tree + voidFlame
        - Use smaller versions for enrage mode when voidFlame is active
        - Reduce number of rocks in the golem fight and add this attack to it

    - Spawn up to 2 Lightning Drones in void tree fight

    - Add punching fist attack to void tree rage phase if voidStone is active

    - Restrict laser barrage to if voidStone is active. Change it to be single bursts of 4 that can occur multiple times per phase. Slightly increase delay.

    - Add void pit tiles and use them in the void area, add ledges to prevent walking over the void.
        - This will allow the astral projection to move freely over the void.

    - Holy Sanctum Improvements
        - Add phoenix boss before phoenix crown prize
            - The phoenix spawns by opening the large chest with the crown inside of it and drops the crown when defeated.
            - When opening the chest, the crown prize appears.
                "You obtained the Phoenix Crown?!" "..." "The Crown bursts into flames!!"
                Then the crown sprite turns into the Phoenix and the battle commences
                The Phoenix regenerates life faster the more wounded it is. It can only be defeated with a level 2 charge attack when weakened enough.
                ? Should this same sequence play out with any item in randomizer, or should the Phoenix crown always initiate the fight in randomizer
                    - Perhaps spawning the Phoenix briefly transports the player to a pocket spirit dimension where the fight happens.
                    - For now, let's just have this apply to whichever item is placed in the Phoenix Crown chest in the Holy Sanctum.
                    - The item will still appear to be the phoenix crown on opening the chest, but then the Phoenix will just drop whatever it was assigned.
        - Add sanctum tower with bow in big chest
            - Include hybrid material/spirt world puzzles

    - Mysteries
        - Lava appears under floor 2 in the middle of void tree fight
        - Certain tiles can be frozen in lava on voidFlame

    Cocoon Boss
        - Improve visuals for persistent blast attacks

    - Add crucible to the end of the Grand Temple

    - Add 'only' visibility option to layers that hides everything else when selected.

    - Add doors and interiors to summoner ruin buildins in spirit world
        - Populate with War God Alcolytes and the Progenitor Spirit

    - Stretch goal: allow changing lightning AOE attacks to use a ray instead of a circle if the player is too close to a conductive object.

    - Prevent grabbing tiles/objects across ledges
        - on grab, check if the player can move into the object by running the movement algorithm with a special mode that ignores all normal collisions and prevents crossing ledges in any direction. Prevent the grab if this movement check fails.

    - Cloud jumping near the edges can sometimes result in landing poorly either taking damage or underground in a ledge. Would be nice to find a way to clean up jumping from ledge to ledge.

    - Balloon Megapede Improvements
        - Tail leaves behind time AoE bombs

    - Allow destroying light stones when landing with iron boots?

    - Drain all lava in the crater when the fire beast isn't spawned yet? (only matters for entrance randomizer)

    - Allow walking on clouds/cracked ground while invisible?
        - Would have to be careful in sky not to run out of spirit energy
        - Might be difficult to tell if checks are in logic based on mana bar
            - Could add special logic check against specific max spirit amounts to simplify this.

    - Mine cart mechanic with switchable tracks.
        - Or maybe a pipe puzzle with lava flow in the forge. Maybe NPC asks for help fixing the pipes.

    - Dungeon with super tile that is just the vertical face of a cliff/tower/tree that you can climb up/jump down to change floors.

    - Add some speaker name so it is clear who is talking in cut scenes with multiple characters.
        - Add this to cut scene with Elder+Rival

    - Update logic to account for clone throw over obstacles?
        - Wait on this until we have adjusted any obstacles we don't want to allow this for.

    Puzzle ideas
        - Use a clone to stand on a switch to hold a door open.
        - Use a clone to jump off a cliff to press one switch, then destroy it and make another clone to jump down another cliff to press another switch to open a door at the top of the cliff.
        - A linked pot needs to be dragged to cover a switch in the other world, but there are pits only in the other world that you must use spirit sight/trueSight to see.

    Change prep animation for explosion
        charge particles form randomly in a circle around the hero shooting into them,
        with shorter radius and more density as time passes.

    Gold Armor Upgrade
        If Spirit Chakram is fully upgraded and the player has golden mail they can use:
        500 Jade + 2 gold and 5 silver to double effectiveness of golden mail

    Editor Improvements
        - Track which zones have been changes since the last time they were exported
            - Show indicator that zone has "unexported" changes.
        - Save changes to zones to local storage and prompt to apply them when starting the editor.
        - Support undo/redo actions
            - Include in context menu when editor is active
        - Add graphical palettes
            - (low priority) super tile layout selection

    - Add SFX when the MC is damaged

    - Add sleeping Vanara to the Cocoon.
        - Can use a special NPC that doesn't face you when talking for now.
        - Use a variety of colors.

    World Tree
        Tower is a series of 2x2 super tiles with a vine for climbing to the next section that
        Floor 1 is land level + underwater(in material world)
            - Fight frost beast and destroy heart before advancing.
        Floor 2 is sky level + has unlockable exit to sky (in material world only)
            - Fight storm beast and destroy heart before advancing.
        Floor 3 is atmosphere level + is hot
            - Fight flame beast and destroy heart before advancing.
        Floor 4 is lower orbit + material zones have low gravity
            - Fight all elemental beasts together without hearts
        Floor 5 has final boss
        - Giant tree grows just to the north of the war temple and into the sky, occupying unused spaces in the SE corner of the map.
        - Climb giant vines in the tree to reach the top
        - Lower level parts may have parts where you go out and branches so you can see how high up you are getting
        - Tree is a clone of the helix, but allowed to grow to completion this time.

    World Tree Boss Void Beast
        - Possible 3 phase approach
            - Void tree, Outer shell, defeat to open up a pit to reach the heart
                - Takes place on most of a super tile
                - Has four sub targets that can be destroyed to temporarily disable some of its attacks/defenses
                    - Possibly starts with 2 and spawns 3 during second phase and all 4 for final phase.
                    - Which ones spawned are random, but deterministic for each seed.
                    - Targets are neutral, fire, ice, lightning, and enable different defense/offense mechanics.
                - Lots of large attacks to dodge while you navigate the arena
                    - (neutral) golem hands, Laser beams
                    - Fire walls, lava ground
                    - Lightning strikes, lightning barriers
                    - Frost grenades, ice walls
            - Void heart, defeat to relase the final boss
            - Void beast
                - maybe looks like a carnivorous plant with a giant mouth full of teeth and a bunch of tendrils like scorpion tails.
                    - Could use this boss design for the forest temple if not here.

        - Fight takes place on most of a full super tile, but each section of the fight is on a smaller platform in the material world where the player damages the boss and avoids various attack mechanics.
            - Maybe the battlefield is even taller than a regular super tile and the player must keep advancing tiers sort of like the final battle with the statues in ff6.
            - Each tier could focus on a different pair of combat mechanics like staff + iron boots, and each travel section could focus on different movement mechanics
        - After a certain amount of time/damage, the boss phases and requires the player reach another platform to damage it, which becomes more difficult as the phases progress, eventually requiring the player to use portals to the spirit realm to cross platforms provided by NPC helpers to reach the next platform.
        - Elemental weak spots that must each be hit to briefly expose the main weak spot.
            - Start with a single spot + 1 element, and advance to up to 5 across all 3 elements.
            - Can arrange them differently to benefit different tools.
        - Aided by Champion initially and then Vanara Rival during the last phase.

        Must rescue Champion and work together to defeat the boss
            - Mechanics where one of you creates an opening for the other to damage the boss.
            - Mechanics where you protect each other from boss attacks.
            - Failure to protect champion will:
                - Require completing a rescue mechanic or waiting long enough for her to free herself
                - Cannot benefit from champion mechanics for damage or protection while champion is out of comission
        Phases where specific elements are required to damage it.
        Phases designed for each tool, but does not require them
            - Tools can give extra opportunities to damage the boss
                - Barrier to reflect projectiles/protect champion while they attack.
                    - Maybe a mechanic where you put up a barrier and reflect attacks while she prepares a strong attack against the boss
                - Bow to shoot distant weak spots
            - Tools can make it easier to avoid attacks

    Lab + World Tree Notes:
        - Requires all elements to complete
        - Fight rival near the start to claim the last element
        - Possible flow:
            Enter throne room of the War Temple in the Spirit World and fight rival, get last element and open tunnel entrance.
                - This step is only completable after fighting the rival during the 3rd spirit beast battle.
            Tunnel takes you to the lab where the War God's Scientists have been creating Hybrdid creatures and have made a modified World Tree Seed from the Helix.
            Can(must?) find clone upgrade to complete the lab.
            The seed is activated(possibly by combined proximity of champion+MC) and grows a giant tree that MC must climb to rescue the Champion and stop the War God.
            The War God will use the engine to make a breeding ground for his drone soldiers, the MC might use it to synthesize the Vanara and Native life to coexist.

    - Flying enemies should not move over abyss tiles(make abyss tiles + ceiling tiles impassable to flying enemies).

    Peach Cave improvements
        - Fix spirit world tiles
        - Add Spirit World Checks
            - Add a 2 way portal to boss chamber
            - Add a single cracked entrance to the top from the overworld.
                - This is to allow easy discover from the spirit world but prevent using this cave for spirit world access early.
            - Add 4 easy checks to top floor and bombable pit entrance to basement
                - Add cracked status to pit entrances.
            - Require Mitts for entering/exiting from the basement.
            - Add 3 checks behind different tool combinations
                - cracked ground for cloud boots/ice magic/invisibility
                - staff or teleportation to get across L shaped pits
                - bow+torches or fire element to unfreeze a chest

    - Add behavior that prevents non-flying enemies from crossing tiles/objects, use for cracked ground, escalators, bead cascades, etc.
        - Anything that doesn't handle enemies gracefully either needs to keep enemies out or add handling.

    - Game occasionally plays small bits of music while muted.

    - Make sure ice tiles are removed from frost beast+heat sink battles after they are defeated.

    - Add new hold+walk chakram animations
        - play last 2 frames of attack animation on release.

    - Add actual waterfall animations
        - Use lava falls as a basis
        - Maybe bake in special graphics for caves behind waterfalls.
        - Have special effect for water splashing on objects going under the waterfall.

    - Would be nice if staff could go across ledges.

Combat Ideas:
    - Concentric damaging rings that collapse into the player. Player must time it so that they are close enough together to dodge roll through in order to avoid damage.
    - Rolling enemy that leaves a trail of ice/fire behind it and bounces off walls. Hitting it knocks it in different directions.

Minigame Ideas:
    - Add Vanara VR dream world with mini games.
        - Boss practice
    - Could add something like an AR arcade to spirit city

Staff Improvements:
    - Charging staff 2 should show a preview of where it will hit and get wider in addition to longer
        - This should start at 4x1, 5x1 then 6x2->10x2, 11x3->15x3, 16x4->20x4
        - Preview will only show the max size that will fit in the current space
        - Ideally you could move around while charging and the preview will update appropriately
        - Would be nice to have this preview behavior when holding down the staff button for staff 1.

Respawn improvements:
    Only adjust respawn when in the same screen area as the spawn point.
    Or possibly only adjust respawn when using specific doors.
        Map dungeon entrances to respawn points?

Tutorial Improvements:
    Add advanced combat/tool tutorials
        - Maybe NPCs in home cave, or some kind of training/tutorial dojo?
        - Hitting enemies with chakram held in hand
        - Enemy iframes prevent them from damaging you
        - Maybe different sections for different tools.

Add more screen shakes:
    - Probably for some impactful boss attacks.
    - Scene where elemental beasts escape and attack the holy city
        - Maybe could be periodic large shake+explosion as if there is a large explosion nearby
        - Could have different combination of effects to signify attacks from each type of elemental beast
        - Could make sure these effects are also used when actually fighting the beasts for consistency

High level list of things left to do:
    Areas missing significant content:
        Lab
        World Tree
    Missing Bosses for existing areas:
        Forge Boss
        Phoenix boss in Holy Sanctum
        Eight Trigram Furnace at the end of the Gauntlet
        Crater midboss
    Missing mechanics:
        - Vanara dreamland boss simulator with difficulty modifiers
        Hero helping during first flame beast/frost beast fights
        Rival during last beast fight for all elements
        Spirit Gates + Spirit Keys
            - Probably do beanstalks instead of this.
        Spirit shop + Jade Idols
        Treasure Hunter Shop
        Fertility shrine donations
    Items missing implementation:
        Gloves charge 1 + 2

Generic boss improvements
    - Add vulnerable phases for bosses where they take ~5x damage, increase boss health by ~2x

Misc improvements
    - allow facing diagonals while not moving?

Add toasts to development for undoing actions:
    - Deleting layers
    - Replacing > 100 tiles


Simple randomization ideas:
    - Allow floor switches under covered tiles, randomizer the location of a floor switch to open a door.
        - Make sure true sight reveals this.
    - Place a key under a random pot
        - Make sure spirit sight reveals this.

Treasure Hunter Store
    - Initially can only carry 200 coins
    - Treasure hunter sells
        - Full life for  20 coins
        - 500 coin wallet for 50 coins
        - 1000 coin wallet for 200 coins
    - The first time you find money in a chest that would exceed wallet size you find a coupon from the treasure hunter for the value of the chest advertising his store.
    - Future chests that would exceed your wallet size contain treasures that you can sell to the treasure hunter for the value of the coins from the chest.
    - Every 5 chests containing money unlock new items in the treasure hunter store
        - Peach Piece for 100 coins
        - 1000 coin wallet for 200 coins
        - Jade Idol for 300 coins
        - Lodestone necklace (50% damage from lightning attacks) for 500 coins

Fertility Shrine
    - Donate 50 coins at a time in the material world
    - Chests will appear in the spirit world based on the total amount donated
        50 -> Jade Idol
        100 -> Peach Piece
        200 -> Spirit Key (cannot donate more than 200 coins)

Spirit Store(s)
    - Items might be split between different vendors
    - Trade Jade Idols for items
        2 -> Peach Piece
        3 -> Spirit Key
        5 -> Quick Charge (40% reduction in time to charge)

Charge Chakram Attack:
    - Maybe change level 1 charge to spin around hero in a circle twice? Brief 0.5s invulnerability with attack animation.
    - Charge level 2 could have 2 chakrams spin at different radiuses and directions? 50 mana, lasts 4 seconds.

At some point I should write tests to validate certain things like:
    - All zone+object targets are defined.
    - All bombable + locked doors have ids, all objects with saveStatues set have ids.
    - All objectFlags correspond to some object or dialogue key or loot type
    - All escaped dialogue corresponds to a special frame or loot type.

Clone improvements
    Add particle effects when using the clone tool (+animation eventually)

Additional Bow Behavior:
    Arrows should have stuck frames for diagonals or stick out orthoganal to whatever they hit.
    Charge level 2 creates an elemental explosion
        - Neutral element can destroy objects similar to clone explosion.

Peach Cave Improvements:
    - Add enemies:
        - Eggs that hatch into enemies if not destroyed first
    - Sticky Web Ground
    - Add boss:
        - Spawns eggs
        - Drains light and regains a bit of health for every 25% lost

Golem Boss Improvements:
    - Tighten up timing when switching between attacks
        - Cut short any hand actions that aren't close to completion when starting enrage modes.
    - Slam both hands together
    - Quickly slam both hands in succession a single time.
    - Knocking bolders down from the ceiling (use rock riles + rock particles when they break)
        - Could drop some down for certian fist slam attacks
        - Could have the boss slam against the walls when strafing side to side or raise entire body and slam ground to drop stones.
        - Could also drop additional permanent barries that reduce the safe zones on the sides.

Coccoon Improvements:
    - Add new enemies.
    - Animate the ents when they attack.

River Temple Improvements:
    - Some underwater enemies
    - Some crab enemies with ice shells that require fire element to defeat
    - Allow swimming over low walls, use ice spikes to block paths if necessary.
    - Maybe torches should stay lit during the boss fight once turned on.

Staff Tower Improvements
    - Conveyer belts/escalators.
        - Conveyer belts should also effect movable object/enemies on the ground touching them.
        - Lightning magic will turn a conveyer belt on if it is off.
    - Disabled conveyer belt with pots on it that needs to be turned on to move the pots out of the way.


Crater Improvements
    - Add additional lava animations.
    - Add Flame Guardian enemies
        - Stationary like Crystal Guardian
        - Replace ents with Flame Guardians
    - Lava Fireballs that spawn from lava in an anulus around player about ever 4 seconds
        - Rise into the air then explode into 8 fireballs.
    - Add Shepard's Maw enemy
        - Like a carnivorous plant in the spirit world
        - Projects fake enemies on tendrils into the material world to herd prey to its mouth
            - Fake enemies attack with projectiles or hot gas
        - Bites into the material world when the prey is near
        - Kill by evading the maw attack and then hitting it while it is briefly in material world
            - Or fight it in the spirit world if you are there
    - Add heat sink enemies
        - Like ghosts in material world
        - Move to the hottest tile/object they can find:
            - lava (4x radius) > fire (2x radius) > player (radius) > freezeable tile (radius)
        - Become solid+vulnerable when they try to pump heat from the material world
        - Can turn lava tiles solid briefly, or solid tiles to ice
        - Will try to chase and freeze the player if they get near
            - Will lose interest in the player while frozen
        - 1 or 2 second cool down on freezing anything
    - Add Engorge Heat Sink mini boss
        - Giant heat sink that is cooling one of the under lava caves you uncover
        - 4x as large and slow, but shrinks and speeds up as damaged
        - About 2x faster than normal heats sinks at minimum size
        - On defeat it possesses the player giving them the "Cooling Spirit" ability (Fire Blessing).
        - The cave becomes hot again after the boss is defeated but they player is now immune to the effect.

War Lab
    - Praying Mantis-like bug soldiers
        - Can emerge from tubes when security beams are triggered in certain rooms.
        - Defensive stance with crossed arms that blocks most attacks
        - Leap strike attack in any direction
        - Possible dodge + Leap strike instead of blocking attack (like electric squirrel dodge)
        - Spinning Scythe projectile attack

Multi-area Boss ideas:
    - Plant-like boss that is growing in several chambers that you have to move between to defeat.
    - Boss that escapes and must be chased to different chambers.

Add Small Loot to editor that creates LootDrop
    - locked to tile grid
    - if on destructable tile (cuttable, pickup), not rendered/updated until the tile is destroyed.
        - This should actually be done for any loot, this will make it easy to hide keys under objects.
        - We can support progress items under tiles, but probably shouldn't actually use this in practice in order to avoid players searching under every tile. On the other hand, if we clearly telegraph when this happens, maybe we can void this problem and encourage players to use smart ways to check for things (like spirit sight to search under many objects for a key).
    - Default save status to dungeon
    - Add an editor option to clear the history of picked up small loots.


Add ability to charge carried objects
    Hold the passive button when picking up an object to charge
    Charge level is limited both by level of gloves/bracers and charge level.
    Should add selected element to thrown object
    Apply element changes to tiles while you hold them (bush might burn up into ash in your hands with fire element, or turn to ice)

Improve Tool Selection:
    - Display a letter attached to the selection + HUD based on the button/keyboard key.

Additional Staff Behavior:
    Charging the staff does a very large spin attack that knocks enemies away.
        Lvl 2 charge is a screen wide attack the applies damage+element to all enemies.
